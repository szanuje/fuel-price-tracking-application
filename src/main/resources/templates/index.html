<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/maps.css}"/>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" rel="stylesheet" />
    <link
            rel="stylesheet"
            href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css"
            type="text/css"
    />
    <link
            rel="stylesheet"
            href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.css"
            type="text/css"
    />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/v4-shims.css">

    <script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js"></script>
    <script src='https://npmcdn.com/mapbox-gl-circle/dist/mapbox-gl-circle.min.js'></script>
    <!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script th:src="@{/js/main.js}"></script>
    <title>Fuel App</title>
</head>
<body>
<div id="blur-me">

    <header>
        <div class="menu-bar" id="menu-bar">
            <div class="logo">
                <a th:href="@{/}" id="menuhome2"><img th:src="@{/images/gas-station-icon.png}"
                                                      alt="gas-station-icon" class="gas-station-icon"></a>
                <a th:href="@{/}" id="menuhome"><p>Fuels</p></a>
            </div>
            <nav class="navigation">
                <ul>
                    <li sec:authorize="hasRole('ROLE_ADMIN')"><a class="navigation-text" th:href="@{/console}"
                                                                 id="menuconsole">Console</a></li>
                    <li sec:authorize="isAnonymous()"><span class="navigation-text" th:href="@{/}" id="menuregister">Register</span>
                    </li>
                    <li sec:authorize="isAnonymous()"><span class="navigation-text" id="menulogin">Login</span></li>
                    <li sec:authorize="isAuthenticated()"><a class="navigation-text" th:href="@{/stations/add}"
                                                             id="menuaddstation">Add Station</a></li>
                    <li sec:authorize="isAuthenticated()"><a class="navigation-text" th:href="@{/test}" id="menuuser"
                                                             th:text="${#authentication.name}"></a></li>
                    <li sec:authorize="isAuthenticated()"><a class="navigation-text" th:href="@{/logout}"
                                                             id="menulogout">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="site" id="site">
        <div id="main-map"></div>
        <div id="instructions" class="hide"></div>
        <div id="circle"></div>
    </div>

</div>

<div class="modal login animate hide" id="login-modal">
    <form class="loginform" th:action="@{/login}" method="POST" id="loginform">
        <h2>Please sign in</h2>
        <label for="username">Username<span class="warning"
                                            id="wrong-username-warning">wrong username or password</span></label>
        <input type="text" placeholder="Enter Username" name="username" id="username" required>
        <label for="password">Password</label>
        <input type="password" placeholder="Enter Password" name="password" id="password" required>
        <button class="loginbutton" type="submit" id="loginbutton">Login</button>
    </form>
</div>
<div class="modal register animate hide" id="register-modal">
    <form class="registerform" th:action="@{/register}" method="POST" th:object="${user}" id="registerform">
        <h2>Please sign up</h2>
        <label for="user">Username<span class="warning" id="user-exists-warning">user already exists</span></label>
        <input th:field="*{username}" type="text" placeholder="Enter Username" name="user" id="user" required>
        <label for="pass" id="passwordlabel">Password</label>
        <input th:field="*{password}" type="password" placeholder="Enter Password" name="pass" id="pass"
               pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
               title="password must contain at least: 8 letters, lowercase letter, uppercase letter, number" required>
        <label for="confirm-pass">Confirm Password<span class="warning" id="password-match-warning">passwords don't
                    match</span></label>
        <input type="password" placeholder="Confirm Password" name="confirm-pass" id="confirm-pass" required>
        <label for="email">Email</label>
        <input th:field="*{email}" type="email" placeholder="Enter Email" name="email" id="email" required>
        <label for="name">First Name</label>
        <input th:field="*{name}" type="text" placeholder="Enter First Name" name="name" id="name" required>
        <label for="surname">Last Name</label>
        <input th:field="*{surname}" type="text" placeholder="Enter Last Name" name="surname" id="surname" required>
        <button class="registerbutton" type="submit" id="registerbutton">Register</button>
    </form>
</div>
</body>

</html>